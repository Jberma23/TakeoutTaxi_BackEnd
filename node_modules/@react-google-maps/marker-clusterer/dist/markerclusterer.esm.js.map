{"version":3,"file":"markerclusterer.esm.js","sources":["../src/ClusterIcon.tsx","../src/Cluster.tsx","../src/Clusterer.tsx"],"sourcesContent":["/* eslint-disable filenames/match-regex */\n/* globals google */\nimport {\n  Cluster\n} from './Cluster'\n\nimport {\n  ClusterIconStyle,\n  ClusterIconInfo\n} from './types'\n\nexport class ClusterIcon {\n  cluster: Cluster;\n  className: string;\n  styles: ClusterIconStyle[];\n  center: google.maps.LatLng | undefined;\n  div: HTMLDivElement | null;\n  sums: ClusterIconInfo | null;\n  visible: boolean;\n  url: string;\n  height: number;\n  width: number;\n  anchorText: number[];\n  anchorIcon: number[];\n  textColor: string;\n  textSize: number;\n  textDecoration: string;\n  fontWeight: string;\n  fontStyle: string;\n  fontFamily: string;\n  backgroundPosition: string;\n\n  boundsChangedListener: google.maps.MapsEventListener | null;\n\n  constructor(cluster: Cluster, styles: ClusterIconStyle[]) {\n    cluster.getClusterer().extend(ClusterIcon, google.maps.OverlayView)\n    this.cluster = cluster\n    this.className = this.cluster.getClusterer().getClusterClass()\n    this.styles = styles\n    this.center = undefined\n    this.div = null\n    this.sums = null\n    this.visible = false\n    this.boundsChangedListener = null\n    this.url = ''\n    this.height = 0\n    this.width = 0\n    this.anchorText = [0, 0]\n    this.anchorIcon = [0, 0]\n    this.textColor = 'black'\n    this.textSize = 11\n    this.textDecoration = 'none'\n    this.fontWeight = 'bold'\n    this.fontStyle = 'normal'\n    this.fontFamily = 'Arial,sans-serif'\n    this.backgroundPosition = '0 0'\n    // @ts-ignore\n    this.setMap(cluster.getMap()) // Note: this causes onAdd to be called\n  }\n\n  onAdd() {\n    let cMouseDownInCluster: boolean\n    let cDraggingMapByCluster: boolean\n\n    this.div = document.createElement(\"div\")\n    this.div.className = this.className\n    if (this.visible) {\n      this.show()\n    }\n\n    // @ts-ignore\n    this.getPanes().overlayMouseTarget.appendChild(this.div)\n\n    // Fix for Issue 157\n    this.boundsChangedListener = google.maps.event.addListener(\n      // @ts-ignore\n      this.getMap(),\n      \"boundschanged\",\n      function boundsChabged() {\n        cDraggingMapByCluster = cMouseDownInCluster\n      }\n    )\n\n    google.maps.event.addDomListener(this.div, \"mousedown\", function onMouseDown() {\n      cMouseDownInCluster = true\n      cDraggingMapByCluster = false\n    })\n\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    google.maps.event.addDomListener(\n      this.div,\n      \"click\",\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      (event: Event) => {\n        cMouseDownInCluster = false\n\n        if (!cDraggingMapByCluster) {\n          const markerClusterer = this.cluster.getClusterer()\n\n          /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n          google.maps.event.trigger(markerClusterer, \"click\", this.cluster)\n          google.maps.event.trigger(markerClusterer, \"clusterclick\", this.cluster) // deprecated name\n\n          // The default click handler follows. Disable it by setting\n          // the zoomOnClick property to false.\n          if (markerClusterer.getZoomOnClick()) {\n          // Zoom into the cluster.\n            const maxZoom = markerClusterer.getMaxZoom()\n\n            const bounds = this.cluster.getBounds()\n\n            // @ts-ignore\n            markerClusterer.getMap().fitBounds(bounds)\n\n\n            // There is a fix for Issue 170 here:\n            setTimeout(\n              function timeout() {\n              // @ts-ignore\n                markerClusterer.getMap().fitBounds(bounds)\n\n                // Don't zoom beyond the max zoom level\n                // @ts-ignore\n                if (maxZoom !== null && (markerClusterer.getMap().getZoom() > maxZoom)) {\n                // @ts-ignore\n                  markerClusterer.getMap().setZoom(maxZoom + 1)\n                }\n              },\n              100\n            )\n          }\n\n          // Prevent event propagation to the map:\n          event.cancelBubble = true\n\n          if (event.stopPropagation) {\n            event.stopPropagation()\n          }\n        }\n      })\n\n    google.maps.event.addDomListener(\n      this.div,\n      \"mouseover\",\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      () => {\n        /**\n         * This event is fired when the mouse moves over a cluster marker.\n         * @name MarkerClusterer#mouseover\n         * @param {Cluster} c The cluster that the mouse moved over.\n         * @event\n         */\n        google.maps.event.trigger(\n          this.cluster.getClusterer(),\n          \"mouseover\",\n          this.cluster\n        )\n      }\n    )\n\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    google.maps.event.addDomListener(\n      this.div,\n      \"mouseout\",\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      () => {\n        /**\n         * This event is fired when the mouse moves out of a cluster marker.\n         * @name MarkerClusterer#mouseout\n         * @param {Cluster} c The cluster that the mouse moved out of.\n         * @event\n         */\n        google.maps.event.trigger(\n          this.cluster.getClusterer(),\n          \"mouseout\",\n          this.cluster\n        )\n      }\n    )\n  }\n\n  onRemove() {\n    if (\n      this.div &&\n      this.div.parentNode\n    ) {\n      this.hide()\n\n      if (this.boundsChangedListener !== null) {\n        google.maps.event.removeListener(this.boundsChangedListener)\n      }\n\n      google.maps.event.clearInstanceListeners(this.div)\n\n      this.div.parentNode.removeChild(this.div)\n\n      this.div = null\n    }\n  }\n\n  draw () {\n    if (this.visible && this.div !== null && this.center) {\n      const { x, y } = this.getPosFromLatLng(this.center)\n\n      this.div.style.top = y + \"px\"\n      this.div.style.left = x + \"px\"\n    }\n  }\n\n  hide () {\n    if (this.div) {\n      this.div.style.display = \"none\"\n    }\n\n    this.visible = false\n  }\n\n  show () {\n    if (this.div && this.center) {\n      let img = \"\", divTitle = \"\"\n\n      // NOTE: values must be specified in px units\n      const bp = this.backgroundPosition.split(\" \")\n\n      const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10)\n\n      const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10)\n\n      const pos = this.getPosFromLatLng(this.center)\n\n      if (this.sums === null || typeof this.sums.title === \"undefined\" || this.sums.title === \"\") {\n        divTitle = this.cluster.getClusterer().getTitle()\n      } else {\n        divTitle = this.sums.title\n      }\n\n      this.div.style.cssText = this.createCss(pos)\n\n      img = \"<img alt='\" + divTitle + \"' src='\" + this.url + \"' style='position: absolute; top: \" + spriteV + \"px; left: \" + spriteH + \"px; \"\n\n      //@ts-ignore\n      if (!this.cluster.getClusterer().enableRetinaIcons) {\n        img += \"clip: rect(\" + (-1 * spriteV) + \"px, \" + ((-1 * spriteH) + this.width) + \"px, \" +\n          ((-1 * spriteV) + this.height) + \"px, \" + (-1 * spriteH) + \"px);\"\n      }\n\n      img += \"'>\"\n\n      this.div.innerHTML = img + \"<div style='\" +\n        \"position: absolute;\" +\n        \"top: \" + this.anchorText[0] + \"px;\" +\n        \"left: \" + this.anchorText[1] + \"px;\" +\n        \"color: \" + this.textColor + \";\" +\n        \"font-size: \" + this.textSize + \"px;\" +\n        \"font-family: \" + this.fontFamily + \";\" +\n        \"font-weight: \" + this.fontWeight + \";\" +\n        \"font-style: \" + this.fontStyle + \";\" +\n        \"text-decoration: \" + this.textDecoration + \";\" +\n        \"text-align: center;\" +\n        \"width: \" + this.width + \"px;\" +\n        \"line-height:\" + this.height + \"px;\" +\n        // @ts-ignore\n        \"'>\" + this.sums.text + \"</div>\"\n\n      this.div.title = divTitle\n\n      this.div.style.display = \"\"\n    }\n\n    this.visible = true\n  }\n\n  useStyle (sums: ClusterIconInfo) {\n    this.sums = sums\n\n    const style = this.styles[\n      Math.min(this.styles.length - 1, Math.max(0, sums.index - 1))\n    ]\n\n    this.url = style.url\n    this.height = style.height\n    this.width = style.width\n    this.anchorText = style.anchorText || [0, 0]\n    this.anchorIcon = style.anchorIcon || [this.height / 2, this.width / 2]\n\n    this.textColor = style.textColor || \"black\"\n\n    this.textSize = style.textSize || 11\n\n    this.textDecoration = style.textDecoration || \"none\"\n\n    this.fontWeight = style.fontWeight || \"bold\"\n\n    this.fontStyle = style.fontStyle || \"normal\"\n\n    this.fontFamily = style.fontFamily || \"Arial,sans-serif\"\n\n    this.backgroundPosition = style.backgroundPosition || \"0 0\"\n  }\n\n  setCenter(center: google.maps.LatLng) {\n    this.center = center\n  }\n\n  createCss(pos: google.maps.Point): string {\n    const style = []\n\n    style.push(\"cursor: pointer;\")\n\n    style.push(\"position: absolute; top: \" + pos.y + \"px; left: \" + pos.x + \"px;\")\n\n    style.push(\"width: \" + this.width + \"px; height: \" + this.height + \"px;\")\n\n    return style.join(\"\")\n  }\n\n  getPosFromLatLng(latlng: google.maps.LatLng): google.maps.Point {\n    // @ts-ignore\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng)\n\n    pos.x -= this.anchorIcon[1]\n\n    pos.y -= this.anchorIcon[0]\n\n    pos.x = pos.x\n\n    pos.y = pos.y\n\n    return pos\n  }\n}\n","/* eslint-disable filenames/match-regex */\n/* globals google */\nimport {\n  Clusterer\n} from './Clusterer'\n\nimport {\n  ClusterIcon\n} from './ClusterIcon'\n\nimport {\n  MarkerExtended\n} from './types'\n\nexport class Cluster {\n  markerClusterer: Clusterer;\n  map: google.maps.Map | google.maps.StreetViewPanorama;\n  gridSize: number;\n  minClusterSize: number;\n  averageCenter: boolean;\n  markers: MarkerExtended[];\n  center: google.maps.LatLng | undefined;\n  bounds: google.maps.LatLngBounds | null;\n  clusterIcon: ClusterIcon;\n\n  constructor(markerClusterer: Clusterer) {\n    this.markerClusterer = markerClusterer\n    // @ts-ignore\n    this.map = this.markerClusterer.getMap()\n\n    this.gridSize = this.markerClusterer.getGridSize()\n\n    this.minClusterSize = this.markerClusterer.getMinimumClusterSize()\n\n    this.averageCenter = this.markerClusterer.getAverageCenter()\n\n    this.markers = []\n\n    this.center = undefined\n\n    this.bounds = null\n\n    this.clusterIcon = new ClusterIcon(this, this.markerClusterer.getStyles())\n  }\n\n  getSize (): number {\n    return this.markers.length\n  }\n\n  getMarkers (): MarkerExtended[] {\n    return this.markers\n  }\n\n  getCenter (): google.maps.LatLng | undefined {\n    return this.center\n  }\n\n  getMap (): google.maps.Map | google.maps.StreetViewPanorama {\n    return this.map\n  }\n\n  getClusterer (): Clusterer {\n    return this.markerClusterer\n  }\n\n  getBounds (): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center, this.center)\n\n    const markers = this.getMarkers()\n\n    for (let i = 0; i < markers.length; i++) {\n      const position = markers[i].getPosition()\n\n      if (position) {\n        bounds.extend(position)\n      }\n    }\n\n    return bounds\n  }\n\n  remove () {\n    // @ts-ignore\n    this.clusterIcon.setMap(null)\n\n    this.markers = []\n\n    delete this.markers\n  }\n\n  addMarker (marker: MarkerExtended): boolean {\n    if (this.isMarkerAlreadyAdded(marker)) {\n      return false\n    }\n\n    if (!this.center) {\n      const position = marker.getPosition()\n\n      if (position) {\n        this.center = position\n\n        this.calculateBounds()\n      }\n    } else {\n      if (this.averageCenter) {\n        const position = marker.getPosition()\n\n        if (position) {\n          const length = this.markers.length + 1\n\n          this.center = new google.maps.LatLng(\n            (this.center.lat() * (length - 1) + position.lat()) / length,\n            (this.center.lng() * (length - 1) + position.lng()) / length\n          )\n\n          this.calculateBounds()\n        }\n      }\n    }\n\n    marker.isAdded = true\n\n    this.markers.push(marker)\n\n    const mCount = this.markers.length\n\n    const maxZoom = this.markerClusterer.getMaxZoom()\n\n    if (maxZoom !== null && this.map.getZoom() > maxZoom) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map) {\n        marker.setMap(this.map)\n      }\n    } else if (mCount < this.minClusterSize) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map) {\n        marker.setMap(this.map)\n      }\n    } else if (mCount === this.minClusterSize) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers[i].setMap(null)\n      }\n    } else {\n      marker.setMap(null)\n    }\n\n    this.updateIcon()\n\n    return true\n  }\n\n  isMarkerInClusterBounds ( marker: MarkerExtended): boolean {\n    if (this.bounds !== null) {\n      const position = marker.getPosition()\n\n      if (position) {\n        return this.bounds.contains(position)\n      }\n    }\n\n    return false\n  }\n\n  calculateBounds () {\n    this.bounds = this.markerClusterer.getExtendedBounds(\n      new google.maps.LatLngBounds(\n        this.center,\n        this.center\n      )\n    )\n  }\n\n  updateIcon () {\n    const mCount = this.markers.length\n\n    const maxZoom = this.markerClusterer.getMaxZoom()\n\n    if (maxZoom !== null && this.map.getZoom() > maxZoom) {\n      this.clusterIcon.hide()\n\n      return\n    }\n\n    if (mCount < this.minClusterSize) {\n      // Min cluster size not yet reached.\n      this.clusterIcon.hide()\n\n      return\n    }\n\n    if (this.center) {\n      this.clusterIcon.setCenter(this.center)\n    }\n\n    this.clusterIcon.useStyle(\n      this.markerClusterer.getCalculator()(\n        this.markers,\n        this.markerClusterer.getStyles().length\n      )\n    )\n\n    this.clusterIcon.show()\n  }\n\n  isMarkerAlreadyAdded(marker: MarkerExtended): boolean {\n    if (this.markers.indexOf) {\n      return this.markers.includes(marker)\n    } else {\n      for (let i = 0; i < this.markers.length; i++) {\n        if (marker === this.markers[i]) {\n          return true\n        }\n      }\n    }\n\n    return false\n  }\n}\n","/* eslint-disable filenames/match-regex */\n/* globals google */\nimport { Cluster } from './Cluster'\n\nimport {\n  MarkerExtended,\n  ClustererOptions,\n  ClusterIconStyle,\n  TCalculator,\n  ClusterIconInfo\n} from './types'\n\nconst CALCULATOR = function CALCULATOR(markers: MarkerExtended[], numStyles: number): ClusterIconInfo {\n  var index = 0\n\n  var title = \"\"\n\n  var count = markers.length.toString()\n\n  let dv: string | number = count\n\n  while (dv !== 0) {\n    // @ts-ignore\n    dv = parseInt(dv, 10) / 10\n\n    index++\n  }\n\n  index = Math.min(index, numStyles)\n\n  return {\n    text: count,\n    index: index,\n    title: title\n  }\n}\n\nconst BATCH_SIZE = 2000\n\nconst BATCH_SIZE_IE = 500\n\nconst IMAGE_PATH = \"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m\"\n\nconst IMAGE_EXTENSION = \"png\"\n\nconst IMAGE_SIZES = [53, 56, 66, 78, 90]\n\nconst CLUSTERER_CLASS = \"cluster\"\n\nexport class Clusterer {\n  markers: MarkerExtended[];\n  clusters: Cluster[];\n  listeners: google.maps.MapsEventListener[];\n  activeMap: google.maps.Map | google.maps.StreetViewPanorama | null;\n  ready: boolean;\n  gridSize: number;\n  minClusterSize: number;\n  maxZoom: number | null;\n  styles: ClusterIconStyle[];\n  title: string;\n  zoomOnClick: boolean;\n  averageCenter: boolean;\n  ignoreHidden: boolean;\n  enableRetinaIcons: boolean;\n  imagePath: string;\n  imageExtension: string;\n  imageSizes: number[];\n  calculator: TCalculator;\n  batchSize: number;\n  batchSizeIE: number;\n  clusterClass: string;\n  timerRefStatic: number | null;\n\n  constructor(\n    map: google.maps.Map,\n    optMarkers: MarkerExtended[] = [],\n    optOptions: ClustererOptions = {}\n  ) {\n    this.extend(Clusterer, google.maps.OverlayView)\n\n    this.markers = []\n    this.clusters = []\n    this.listeners = []\n    this.activeMap = null\n    this.ready = false\n    this.gridSize = optOptions.gridSize || 60\n    this.minClusterSize = optOptions.minimumClusterSize || 2\n    this.maxZoom = optOptions.maxZoom || null\n    this.styles = optOptions.styles || []\n\n    this.title = optOptions.title || \"\"\n\n    this.zoomOnClick = true\n\n    if (optOptions.zoomOnClick !== undefined) {\n\n      this.zoomOnClick = optOptions.zoomOnClick\n    }\n\n    this.averageCenter = false\n\n    if (optOptions.averageCenter !== undefined) {\n\n      this.averageCenter = optOptions.averageCenter\n    }\n\n    this.ignoreHidden = false\n\n    if (optOptions.ignoreHidden !== undefined) {\n\n      this.ignoreHidden = optOptions.ignoreHidden\n    }\n\n    this.enableRetinaIcons = false\n\n    if (optOptions.enableRetinaIcons !== undefined) {\n      this.enableRetinaIcons = optOptions.enableRetinaIcons\n    }\n    this.imagePath = optOptions.imagePath || IMAGE_PATH\n\n    this.imageExtension = optOptions.imageExtension || IMAGE_EXTENSION\n\n    this.imageSizes = optOptions.imageSizes || IMAGE_SIZES\n\n    this.calculator = optOptions.calculator || CALCULATOR\n\n    this.batchSize = optOptions.batchSize || BATCH_SIZE\n\n    this.batchSizeIE = optOptions.batchSizeIE || BATCH_SIZE_IE\n\n    this.clusterClass = optOptions.clusterClass || CLUSTERER_CLASS\n\n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize = this.batchSizeIE\n    }\n\n    this.timerRefStatic = null\n\n    this.setupStyles()\n\n    this.addMarkers(optMarkers, true)\n    // @ts-ignore\n    this.setMap(map) // Note: this causes onAdd to be called\n  }\n\n  onAdd () {\n    // @ts-ignore\n    this.activeMap = this.getMap()\n\n    this.ready = true\n\n    this.repaint()\n\n    // Add the map event listeners\n    this.listeners = [\n      google.maps.event.addListener(\n        // @ts-ignore\n        this.getMap(),\n        \"zoom_changed\",\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          this.resetViewport(false)\n          // Workaround for this Google bug: when map is at level 0 and \"-\" of\n          // zoom slider is clicked, a \"zoom_changed\" event is fired even though\n          // the map doesn't zoom out any further. In this situation, no \"idle\"\n          // event is triggered so the cluster markers that have been removed\n          // do not get redrawn. Same goes for a zoom in at maxZoom.\n          if (\n            // @ts-ignore\n            this.getMap().getZoom() === (this.get(\"minZoom\") || 0) ||\n            // @ts-ignore\n            this.getMap().getZoom() === this.get(\"maxZoom\")\n          ) {\n            google.maps.event.trigger(this, \"idle\")\n          }\n        }\n      ),\n      google.maps.event.addListener(\n        // @ts-ignore\n        this.getMap(),\n        \"idle\",\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          this.redraw()\n        }\n      )\n    ]\n  }\n\n  // eslint-disable-next-line @getify/proper-arrows/this\n  onRemove () {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers.length; i++) {\n      if (this.markers[i].getMap() !== this.activeMap) {\n        this.markers[i].setMap(this.activeMap)\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters.length; i++) {\n      this.clusters[i].remove()\n    }\n\n    this.clusters = []\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners.length; i++) {\n      google.maps.event.removeListener(this.listeners[i])\n    }\n\n    this.listeners = []\n\n    this.activeMap = null\n\n    this.ready = false\n  }\n\n  draw () {}\n\n  setupStyles() {\n    if (this.styles.length > 0) {\n      return\n    }\n\n    for (let i = 0; i < this.imageSizes.length; i++) {\n      this.styles.push({\n        url: this.imagePath + (i + 1) + \".\" + this.imageExtension,\n        height: this.imageSizes[i],\n        width: this.imageSizes[i]\n      })\n    }\n  }\n\n  fitMapToMarkers () {\n    const markers = this.getMarkers()\n\n    const bounds = new google.maps.LatLngBounds()\n\n    for (let i = 0; i < markers.length; i++) {\n      const position = markers[i].getPosition()\n      if (position) {\n        bounds.extend(position)\n      }\n    }\n\n    // @ts-ignore\n    this.getMap().fitBounds(bounds)\n  }\n\n  getGridSize (): number {\n    return this.gridSize\n  }\n\n  setGridSize (gridSize: number) {\n    this.gridSize = gridSize\n  }\n\n  getMinimumClusterSize (): number {\n    return this.minClusterSize\n  }\n\n  setMinimumClusterSize (minimumClusterSize: number) {\n    this.minClusterSize = minimumClusterSize\n  }\n\n  getMaxZoom (): number | null {\n    return this.maxZoom\n  }\n\n  setMaxZoom (maxZoom: number) {\n    this.maxZoom = maxZoom\n  }\n\n  getStyles (): ClusterIconStyle[] {\n    return this.styles\n  }\n\n  setStyles (styles: ClusterIconStyle[]) {\n    this.styles = styles\n  }\n\n  getTitle (): string {\n    return this.title\n  }\n\n  setTitle (title: string) {\n    this.title = title\n  }\n\n  getZoomOnClick (): boolean {\n    return this.zoomOnClick\n  }\n\n  setZoomOnClick (zoomOnClick: boolean) {\n    this.zoomOnClick = zoomOnClick\n  }\n\n  getAverageCenter (): boolean {\n    return this.averageCenter\n  }\n\n  setAverageCenter(averageCenter: boolean) {\n    this.averageCenter = averageCenter\n  }\n\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden\n  }\n\n  setIgnoreHidden(ignoreHidden: boolean) {\n    this.ignoreHidden = ignoreHidden\n  }\n\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons\n  }\n\n  setEnableRetinaIcons(enableRetinaIcons: boolean) {\n    this.enableRetinaIcons = enableRetinaIcons\n  }\n\n  getImageExtension(): string {\n    return this.imageExtension\n  }\n\n  setImageExtension(imageExtension: string) {\n    this.imageExtension = imageExtension\n  }\n\n  getImagePath(): string {\n    return this.imagePath\n  }\n\n  setImagePath(imagePath: string) {\n    this.imagePath = imagePath\n  }\n\n  getImageSizes(): number[] {\n    return this.imageSizes\n  }\n\n  setImageSizes(imageSizes: number[]) {\n    this.imageSizes = imageSizes\n  }\n\n  getCalculator(): TCalculator {\n    return this.calculator\n  }\n\n  setCalculator(calculator: TCalculator) {\n    this.calculator = calculator\n  }\n\n  getBatchSizeIE(): number {\n    return this.batchSizeIE\n  }\n\n  setBatchSizeIE(batchSizeIE: number) {\n    this.batchSizeIE = batchSizeIE\n  }\n\n  getClusterClass(): string {\n    return this.clusterClass\n  }\n\n  setClusterClass(clusterClass: string) {\n    this.clusterClass = clusterClass\n  }\n\n  getMarkers(): MarkerExtended[] {\n    return this.markers\n  }\n\n  getTotalMarkers(): number {\n    return this.markers.length\n  }\n\n  getClusters(): Cluster[] {\n    return this.clusters\n  }\n\n  getTotalClusters(): number {\n    return this.clusters.length\n  }\n\n  addMarker(marker: MarkerExtended, optNoDraw: boolean) {\n    this.pushMarkerTo(marker)\n\n    if (!optNoDraw) {\n      this.redraw()\n    }\n  }\n\n  addMarkers(markers: MarkerExtended[], optNoDraw: boolean) {\n    for (let key in markers) {\n      if (markers.hasOwnProperty(key)) {\n        this.pushMarkerTo(markers[key])\n      }\n    }\n\n    if (!optNoDraw) {\n      this.redraw()\n    }\n  }\n\n  pushMarkerTo(marker: MarkerExtended) {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      // eslint-disable-next-line @getify/proper-arrows/name, @getify/proper-arrows/this\n      google.maps.event.addListener(marker, \"dragend\", () => {\n        if (this.ready) {\n          marker.isAdded = false\n\n          this.repaint()\n        }\n      })\n    }\n\n    marker.isAdded = false\n\n    this.markers.push(marker)\n  }\n\n  removeMarker_ (marker: MarkerExtended): boolean {\n    let index = -1\n\n    if (this.markers.indexOf) {\n      index = this.markers.indexOf(marker)\n    } else {\n      for (let i = 0; i < this.markers.length; i++) {\n        if (marker === this.markers[i]) {\n          index = i\n\n          break\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false\n    }\n\n    marker.setMap(null)\n\n    this.markers.splice(index, 1) // Remove the marker from the list of managed markers\n\n    return true\n  }\n\n  removeMarker (marker: MarkerExtended, optNoDraw: boolean): boolean {\n    const removed = this.removeMarker_(marker)\n\n    if (!optNoDraw && removed) {\n      this.repaint()\n    }\n\n    return removed\n  }\n\n  removeMarkers (markers: MarkerExtended[], optNoDraw: boolean): boolean {\n    let removed = false\n\n    for (let i = 0; i < markers.length; i++) {\n      removed = removed || this.removeMarker_(markers[i])\n    }\n\n    if (!optNoDraw && removed) {\n      this.repaint()\n    }\n\n    return removed\n  }\n\n  clearMarkers () {\n    this.resetViewport(true)\n\n    this.markers = []\n  }\n\n  repaint () {\n    const oldClusters = this.clusters.slice()\n\n    this.clusters = []\n\n    this.resetViewport(false)\n\n    this.redraw()\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(\n      function timeout() {\n        for (let i = 0; i < oldClusters.length; i++) {\n          oldClusters[i].remove()\n        }\n      },\n      0\n    )\n  }\n\n  getExtendedBounds (bounds: google.maps.LatLngBounds): google.maps.LatLngBounds {\n    // @ts-ignore\n    const projection = this.getProjection()\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(\n      // Turn the bounds into latlng.\n      new google.maps.LatLng(\n        bounds.getNorthEast().lat(),\n        bounds.getNorthEast().lng()\n      )\n    )\n\n    trPix.x += this.gridSize\n    trPix.y -= this.gridSize\n\n    const blPix = projection.fromLatLngToDivPixel(\n      // Turn the bounds into latlng.\n      new google.maps.LatLng(\n        bounds.getSouthWest().lat(),\n        bounds.getSouthWest().lng()\n      )\n    )\n\n    blPix.x -= this.gridSize\n    blPix.y += this.gridSize\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(\n      // Convert the pixel points back to LatLng nw\n      projection.fromDivPixelToLatLng(trPix)\n    )\n\n    bounds.extend(\n      // Convert the pixel points back to LatLng sw\n      projection.fromDivPixelToLatLng(blPix)\n    )\n\n    return bounds\n  }\n\n  redraw () {\n    // Redraws all the clusters.\n    this.createClusters(0)\n  }\n\n  resetViewport (optHide: boolean) {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters.length; i++) {\n      this.clusters[i].remove()\n    }\n\n    this.clusters = []\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers.length; i++) {\n      const marker = this.markers[i]\n\n      marker.isAdded = false\n\n      if (optHide) {\n        marker.setMap(null)\n      }\n    }\n  }\n\n  distanceBetweenPoints (p1: google.maps.LatLng, p2: google.maps.LatLng): number {\n    const R = 6371 // Radius of the Earth in km\n\n    const dLat = (p2.lat() - p1.lat()) * Math.PI / 180\n    const dLon = (p2.lng() - p1.lng()) * Math.PI / 180\n\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n      Math.sin(dLon / 2) * Math.sin(dLon / 2)\n\n    return R * (2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)))\n  }\n\n  isMarkerInBounds (marker: MarkerExtended, bounds: google.maps.LatLngBounds): boolean {\n    const position = marker.getPosition()\n\n    if (position) {\n      return bounds.contains(position)\n    }\n\n    return false\n  }\n\n  addToClosestCluster (marker: MarkerExtended) {\n    let cluster\n\n    let distance = 40000 // Some large number\n\n    let clusterToAddTo = null\n\n    for (let i = 0; i < this.clusters.length; i++) {\n      cluster = this.clusters[i]\n\n      const center = cluster.getCenter()\n\n      const position = marker.getPosition()\n\n      if (center && position) {\n        const d = this.distanceBetweenPoints(center, position)\n\n        if (d < distance) {\n          distance = d\n\n          clusterToAddTo = cluster\n        }\n      }\n    }\n\n    if (\n      clusterToAddTo &&\n      clusterToAddTo.isMarkerInClusterBounds(marker)\n    ) {\n      clusterToAddTo.addMarker(marker)\n    } else {\n      cluster = new Cluster(this)\n\n      cluster.addMarker(marker)\n\n      this.clusters.push(cluster)\n    }\n  }\n\n  createClusters (iFirst: number) {\n    if (!this.ready) {\n      return\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      /**\n       * This event is fired when the <code>Clusterer</code> begins\n       *  clustering markers.\n       * @name Clusterer#clusteringbegin\n       * @param {Clusterer} mc The Clusterer whose markers are being clustered.\n       * @event\n       */\n      google.maps.event.trigger(this, \"clusteringbegin\", this)\n\n      if (this.timerRefStatic !== null) {\n        window.clearTimeout(this.timerRefStatic)\n\n        delete this.timerRefStatic\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    // @ts-ignore\n    const mapBounds = this.getMap().getZoom() > 3\n      ? new google.maps.LatLngBounds(\n        // @ts-ignore\n        this.getMap().getBounds().getSouthWest(),\n        // @ts-ignore\n        this.getMap().getBounds().getNorthEast()\n      )\n      : new google.maps.LatLngBounds(\n        new google.maps.LatLng(\n          85.02070771743472,\n          -178.48388434375\n        ),\n        new google.maps.LatLng(\n          -85.08136444384544,\n          178.00048865625\n        )\n      )\n\n    const bounds = this.getExtendedBounds(mapBounds)\n\n    const iLast = Math.min(iFirst + this.batchSize, this.markers.length)\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers[i]\n\n      if (!marker.isAdded && this.isMarkerInBounds(marker, bounds)) {\n        if (\n          !this.ignoreHidden ||\n          (\n            this.ignoreHidden &&\n            marker.getVisible()\n          )\n        ) {\n          this.addToClosestCluster(marker)\n        }\n      }\n    }\n\n    if (iLast < this.markers.length) {\n      this.timerRefStatic = window.setTimeout(\n        // eslint-disable-next-line @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          this.createClusters(iLast)\n        },\n        0\n      )\n    } else {\n      this.timerRefStatic = null\n\n      /**\n       * This event is fired when the <code>Clusterer</code> stops\n       *  clustering markers.\n       * @name Clusterer#clusteringend\n       * @param {Clusterer} mc The Clusterer whose markers are being clustered.\n       * @event\n       */\n      google.maps.event.trigger(this, \"clusteringend\", this)\n    }\n  }\n\n  extend(obj1: any, obj2: any): any {\n    return (function applyExtend(object: any) {\n      // eslint-disable-next-line guard-for-in\n      for (let property in object.prototype) {\n        // @ts-ignore\n        this.prototype[property] = object.prototype[property]\n      }\n\n      // @ts-ignore\n      return this\n    }).apply(obj1, [obj2])\n  }\n}\n"],"names":["ClusterIcon","cluster","styles","getClusterer","extend","google","maps","OverlayView","className","getClusterClass","center","undefined","div","sums","visible","boundsChangedListener","url","height","width","anchorText","anchorIcon","textColor","textSize","textDecoration","fontWeight","fontStyle","fontFamily","backgroundPosition","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","document","createElement","show","getPanes","overlayMouseTarget","appendChild","event","addListener","boundsChabged","addDomListener","onMouseDown","markerClusterer","trigger","getZoomOnClick","maxZoom","getMaxZoom","bounds","getBounds","fitBounds","setTimeout","timeout","getZoom","setZoom","cancelBubble","stopPropagation","onRemove","parentNode","hide","removeListener","clearInstanceListeners","removeChild","draw","getPosFromLatLng","x","y","style","top","left","display","img","divTitle","bp","split","spriteH","parseInt","replace","spriteV","pos","title","getTitle","cssText","createCss","enableRetinaIcons","innerHTML","text","useStyle","Math","min","length","max","index","setCenter","push","join","latlng","getProjection","fromLatLngToDivPixel","Cluster","map","gridSize","getGridSize","minClusterSize","getMinimumClusterSize","averageCenter","getAverageCenter","markers","clusterIcon","getStyles","getSize","getMarkers","getCenter","LatLngBounds","i","position","getPosition","remove","addMarker","marker","isMarkerAlreadyAdded","calculateBounds","LatLng","lat","lng","isAdded","mCount","updateIcon","isMarkerInClusterBounds","contains","getExtendedBounds","getCalculator","indexOf","includes","CALCULATOR","numStyles","count","toString","dv","BATCH_SIZE","BATCH_SIZE_IE","IMAGE_PATH","IMAGE_EXTENSION","IMAGE_SIZES","CLUSTERER_CLASS","Clusterer","optMarkers","optOptions","clusters","listeners","activeMap","ready","minimumClusterSize","zoomOnClick","ignoreHidden","imagePath","imageExtension","imageSizes","calculator","batchSize","batchSizeIE","clusterClass","navigator","userAgent","toLowerCase","timerRefStatic","setupStyles","addMarkers","repaint","resetViewport","get","redraw","fitMapToMarkers","setGridSize","setMinimumClusterSize","setMaxZoom","setStyles","setTitle","setZoomOnClick","setAverageCenter","getIgnoreHidden","setIgnoreHidden","getEnableRetinaIcons","setEnableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","optNoDraw","pushMarkerTo","key","hasOwnProperty","getDraggable","removeMarker_","splice","removeMarker","removed","removeMarkers","clearMarkers","oldClusters","slice","projection","trPix","getNorthEast","blPix","getSouthWest","fromDivPixelToLatLng","createClusters","optHide","distanceBetweenPoints","p1","p2","R","dLat","PI","dLon","a","sin","cos","atan2","sqrt","isMarkerInBounds","addToClosestCluster","distance","clusterToAddTo","d","iFirst","window","clearTimeout","mapBounds","iLast","getVisible","obj1","obj2","applyExtend","object","property","prototype","apply"],"mappings":"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"}